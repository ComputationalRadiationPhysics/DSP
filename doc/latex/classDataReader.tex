\hypertarget{classDataReader}{\section{Data\-Reader Class Reference}
\label{classDataReader}\index{Data\-Reader@{Data\-Reader}}
}


Is meant as a producer for the \hyperlink{classRingbuffer}{Ringbuffer} class. It reads data from datafiles as generated by D\-C\-D\-B\-\_\-\-Gen.  




{\ttfamily \#include $<$Data\-Reader.\-h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDataReader_a11f1b8c98c7cd0f0998b6df84a0e1ea8}{Data\-Reader} (const std\-::string \&filename, \hyperlink{classRingbuffer}{Input\-Buffer} $\ast$buffer, int chunksize)
\item 
void \hyperlink{classDataReader_aefb5de1f5a148eaef4b317dc93cf61d5}{read\-To\-Buffer} ()
\item 
int \hyperlink{classDataReader_a8ada95ad5aca5fbb3e50f0b6a954a623}{get\-\_\-n\-Samp} ()
\item 
int \hyperlink{classDataReader_a94f681f6c77c9ad57c09b26fc367084b}{get\-\_\-n\-Seg} ()
\item 
int \hyperlink{classDataReader_ad754d5ff3d2e833aaabf9460f47a77e4}{get\-\_\-n\-Wf} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{classDataReader_a92348a971a3d82d9b5a785f254c1b290}{read\-Header} (const std\-::string \&filename, int \&n\-Sample, int \&n\-Segment, int \&n\-Waveform)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Is meant as a producer for the \hyperlink{classRingbuffer}{Ringbuffer} class. It reads data from datafiles as generated by D\-C\-D\-B\-\_\-\-Gen. 

\hyperlink{classDataReader}{Data\-Reader} The \hyperlink{classDataReader}{Data\-Reader} class reads data files generated by Dacqn program to acquire signals from semiconductor gamma detectors or the D\-C\-D\-B\-\_\-\-Gen program to generate synthetic data for testing purposes.

It separates the signals from two channels into two individual waveforms. A given number of signals is written to the specified \hyperlink{classRingbuffer}{Ringbuffer} in one chunk. If E\-O\-F is reached before all signals for one chunk are read the remaining slots in the chunk are filled with zeros. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classDataReader_a11f1b8c98c7cd0f0998b6df84a0e1ea8}{\index{Data\-Reader@{Data\-Reader}!Data\-Reader@{Data\-Reader}}
\index{Data\-Reader@{Data\-Reader}!DataReader@{Data\-Reader}}
\subsubsection[{Data\-Reader}]{\setlength{\rightskip}{0pt plus 5cm}Data\-Reader\-::\-Data\-Reader (
\begin{DoxyParamCaption}
\item[{const std\-::string \&}]{filename, }
\item[{{\bf Input\-Buffer} $\ast$}]{buffer, }
\item[{int}]{chunksize}
\end{DoxyParamCaption}
)}}\label{classDataReader_a11f1b8c98c7cd0f0998b6df84a0e1ea8}
Basic constructor

Creates the \hyperlink{classDataReader}{Data\-Reader} for the given filename and connects it to the \hyperlink{classRingbuffer}{Ringbuffer} buffer. Multiple signals are read and written to the buffer in one chunk.


\begin{DoxyParams}{Parameters}
{\em filename} & The file to be read. It needs to follow the datastructure as produced by D\-C\-D\-B\-\_\-\-Gen. \\
\hline
{\em buffer} & The ringbuffer to be filled with the data. \\
\hline
{\em chunksize} & Sets the number of signals in one chunk. \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\hypertarget{classDataReader_a8ada95ad5aca5fbb3e50f0b6a954a623}{\index{Data\-Reader@{Data\-Reader}!get\-\_\-n\-Samp@{get\-\_\-n\-Samp}}
\index{get\-\_\-n\-Samp@{get\-\_\-n\-Samp}!DataReader@{Data\-Reader}}
\subsubsection[{get\-\_\-n\-Samp}]{\setlength{\rightskip}{0pt plus 5cm}int Data\-Reader\-::get\-\_\-n\-Samp (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classDataReader_a8ada95ad5aca5fbb3e50f0b6a954a623}
Return number of samples per signal as given by the header of the file. \begin{DoxyReturn}{Returns}
Number of samples per signal 
\end{DoxyReturn}
\hypertarget{classDataReader_a94f681f6c77c9ad57c09b26fc367084b}{\index{Data\-Reader@{Data\-Reader}!get\-\_\-n\-Seg@{get\-\_\-n\-Seg}}
\index{get\-\_\-n\-Seg@{get\-\_\-n\-Seg}!DataReader@{Data\-Reader}}
\subsubsection[{get\-\_\-n\-Seg}]{\setlength{\rightskip}{0pt plus 5cm}int Data\-Reader\-::get\-\_\-n\-Seg (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classDataReader_a94f681f6c77c9ad57c09b26fc367084b}
Return number of signals per segment as given by the header of the file. At the moment only n\-Seg==1 is supported. \begin{DoxyReturn}{Returns}
Number of signals per segment. 
\end{DoxyReturn}
\hypertarget{classDataReader_ad754d5ff3d2e833aaabf9460f47a77e4}{\index{Data\-Reader@{Data\-Reader}!get\-\_\-n\-Wf@{get\-\_\-n\-Wf}}
\index{get\-\_\-n\-Wf@{get\-\_\-n\-Wf}!DataReader@{Data\-Reader}}
\subsubsection[{get\-\_\-n\-Wf}]{\setlength{\rightskip}{0pt plus 5cm}int Data\-Reader\-::get\-\_\-n\-Wf (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classDataReader_ad754d5ff3d2e833aaabf9460f47a77e4}
Return number of signals (waveforms) in the datafile as given by the header of the file. \begin{DoxyReturn}{Returns}
Number of signals in the datafile. 
\end{DoxyReturn}
\hypertarget{classDataReader_a92348a971a3d82d9b5a785f254c1b290}{\index{Data\-Reader@{Data\-Reader}!read\-Header@{read\-Header}}
\index{read\-Header@{read\-Header}!DataReader@{Data\-Reader}}
\subsubsection[{read\-Header}]{\setlength{\rightskip}{0pt plus 5cm}static int Data\-Reader\-::read\-Header (
\begin{DoxyParamCaption}
\item[{const std\-::string \&}]{filename, }
\item[{int \&}]{n\-Sample, }
\item[{int \&}]{n\-Segment, }
\item[{int \&}]{n\-Waveform}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classDataReader_a92348a971a3d82d9b5a785f254c1b290}
Read the header of a datafile, i.\-e. to get the number of samples per signal.

Often the number of samples per signal is needed to instanciate other classes. Use this function to get the header data of a file before instanciating a \hyperlink{classDataReader}{Data\-Reader}


\begin{DoxyParams}{Parameters}
{\em filename} & The file to be read. \\
\hline
{\em n\-Sample} & The number of samples per signal is written to this address. \\
\hline
{\em n\-Segment} & The number of data segments in the file is written to this address. \\
\hline
{\em n\-Waveform} & The number of signals (waveforms) in the file is written to this address. \\
\hline
\end{DoxyParams}
\hypertarget{classDataReader_aefb5de1f5a148eaef4b317dc93cf61d5}{\index{Data\-Reader@{Data\-Reader}!read\-To\-Buffer@{read\-To\-Buffer}}
\index{read\-To\-Buffer@{read\-To\-Buffer}!DataReader@{Data\-Reader}}
\subsubsection[{read\-To\-Buffer}]{\setlength{\rightskip}{0pt plus 5cm}void Data\-Reader\-::read\-To\-Buffer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classDataReader_aefb5de1f5a148eaef4b317dc93cf61d5}
Start reading data from the file and write it to the buffer.

Signals are read from the datafile. The two interleaved signals of one event as recorded by two channels are separated by the reader into two individual signals. The sample data is casted from $<$\-Measure\-Type$>$ to $<$\-D\-A\-T\-A\-T\-Y\-P\-E$>$ as needed for later processing on the devices. A number of chunksize signals are written to the buffer in one chunk after the other. If E\-O\-F is reached before a chunk can be filled with signals the remaining space is filled with zeros. That means in the later evaluation there will appear signals with constant amplitude of zero. 

The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
D\-S\-P/src/Data\-Reader.\-h\end{DoxyCompactItemize}
