<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Digital Signal Processing using CUDA: DataReader Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Digital Signal Processing using CUDA
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classDataReader-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DataReader Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Is meant as a producer for the <a class="el" href="classRingbuffer.html" title="A ringbuffer template supporting non-host consumers/producers.">Ringbuffer</a> class. It reads data from datafiles as generated by DCDB_Gen.  
 <a href="classDataReader.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DataReader_8h_source.html">DataReader.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a11f1b8c98c7cd0f0998b6df84a0e1ea8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataReader.html#a11f1b8c98c7cd0f0998b6df84a0e1ea8">DataReader</a> (const std::string &amp;filename, <a class="el" href="classRingbuffer.html">InputBuffer</a> *buffer, int chunksize)</td></tr>
<tr class="memitem:aefb5de1f5a148eaef4b317dc93cf61d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataReader.html#aefb5de1f5a148eaef4b317dc93cf61d5">readToBuffer</a> ()</td></tr>
<tr class="memitem:a8ada95ad5aca5fbb3e50f0b6a954a623"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataReader.html#a8ada95ad5aca5fbb3e50f0b6a954a623">get_nSamp</a> ()</td></tr>
<tr class="memitem:a94f681f6c77c9ad57c09b26fc367084b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataReader.html#a94f681f6c77c9ad57c09b26fc367084b">get_nSeg</a> ()</td></tr>
<tr class="memitem:ad754d5ff3d2e833aaabf9460f47a77e4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataReader.html#ad754d5ff3d2e833aaabf9460f47a77e4">get_nWf</a> ()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a92348a971a3d82d9b5a785f254c1b290"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataReader.html#a92348a971a3d82d9b5a785f254c1b290">readHeader</a> (const std::string &amp;filename, int &amp;nSample, int &amp;nSegment, int &amp;nWaveform)</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Is meant as a producer for the <a class="el" href="classRingbuffer.html" title="A ringbuffer template supporting non-host consumers/producers.">Ringbuffer</a> class. It reads data from datafiles as generated by DCDB_Gen. </p>
<p><a class="el" href="classDataReader.html" title="Is meant as a producer for the Ringbuffer class. It reads data from datafiles as generated by DCDB_Ge...">DataReader</a> The <a class="el" href="classDataReader.html" title="Is meant as a producer for the Ringbuffer class. It reads data from datafiles as generated by DCDB_Ge...">DataReader</a> class reads data files generated by Dacqn program to acquire signals from semiconductor gamma detectors or the DCDB_Gen program to generate synthetic data for testing purposes.</p>
<p>It separates the signals from two channels into two individual waveforms. A given number of signals is written to the specified <a class="el" href="classRingbuffer.html" title="A ringbuffer template supporting non-host consumers/producers.">Ringbuffer</a> in one chunk. If EOF is reached before all signals for one chunk are read the remaining slots in the chunk are filled with zeros. </p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a11f1b8c98c7cd0f0998b6df84a0e1ea8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataReader::DataReader </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRingbuffer.html">InputBuffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chunksize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Basic constructor</p>
<p>Creates the <a class="el" href="classDataReader.html" title="Is meant as a producer for the Ringbuffer class. It reads data from datafiles as generated by DCDB_Ge...">DataReader</a> for the given filename and connects it to the <a class="el" href="classRingbuffer.html" title="A ringbuffer template supporting non-host consumers/producers.">Ringbuffer</a> buffer. Multiple signals are read and written to the buffer in one chunk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The file to be read. It needs to follow the datastructure as produced by DCDB_Gen. </td></tr>
    <tr><td class="paramname">buffer</td><td>The ringbuffer to be filled with the data. </td></tr>
    <tr><td class="paramname">chunksize</td><td>Sets the number of signals in one chunk. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="a8ada95ad5aca5fbb3e50f0b6a954a623"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int DataReader::get_nSamp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return number of samples per signal as given by the header of the file. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of samples per signal </dd></dl>

</div>
</div>
<a class="anchor" id="a94f681f6c77c9ad57c09b26fc367084b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int DataReader::get_nSeg </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return number of signals per segment as given by the header of the file. At the moment only nSeg==1 is supported. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of signals per segment. </dd></dl>

</div>
</div>
<a class="anchor" id="ad754d5ff3d2e833aaabf9460f47a77e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int DataReader::get_nWf </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return number of signals (waveforms) in the datafile as given by the header of the file. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of signals in the datafile. </dd></dl>

</div>
</div>
<a class="anchor" id="a92348a971a3d82d9b5a785f254c1b290"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int DataReader::readHeader </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>nSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>nSegment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>nWaveform</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read the header of a datafile, i.e. to get the number of samples per signal.</p>
<p>Often the number of samples per signal is needed to instanciate other classes. Use this function to get the header data of a file before instanciating a <a class="el" href="classDataReader.html" title="Is meant as a producer for the Ringbuffer class. It reads data from datafiles as generated by DCDB_Ge...">DataReader</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The file to be read. </td></tr>
    <tr><td class="paramname">nSample</td><td>The number of samples per signal is written to this address. </td></tr>
    <tr><td class="paramname">nSegment</td><td>The number of data segments in the file is written to this address. </td></tr>
    <tr><td class="paramname">nWaveform</td><td>The number of signals (waveforms) in the file is written to this address. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aefb5de1f5a148eaef4b317dc93cf61d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DataReader::readToBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start reading data from the file and write it to the buffer.</p>
<p>Signals are read from the datafile. The two interleaved signals of one event as recorded by two channels are separated by the reader into two individual signals. The sample data is casted from &lt;MeasureType&gt; to &lt;DATATYPE&gt; as needed for later processing on the devices. A number of chunksize signals are written to the buffer in one chunk after the other. If EOF is reached before a chunk can be filled with signals the remaining space is filled with zeros. That means in the later evaluation there will appear signals with constant amplitude of zero. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>DSP/src/<a class="el" href="DataReader_8h_source.html">DataReader.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 3 2014 23:33:07 for Digital Signal Processing using CUDA by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
